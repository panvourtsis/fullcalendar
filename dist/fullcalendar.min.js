!function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):a(jQuery,moment)}(function(a,b){function c(a,b){return b.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function d(a,b){var c=b.longDateFormat("L");return c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),a.isRTL?c+=" ddd":c="ddd "+c,c}function e(a){f(Ja,a)}function f(b){function c(c,d){a.isPlainObject(d)&&a.isPlainObject(b[c])&&!g(c)?b[c]=f({},b[c],d):void 0!==d&&(b[c]=d)}for(var d=1;d<arguments.length;d++)a.each(arguments[d],c);return b}function g(a){return/(Time|Duration)$/.test(a)}function h(c,d){function e(a){var c=b.localeData||b.langData;return c.call(b,a)||c.call(b,"en")}function g(a){da?m()&&(q(),o(a)):h()}function h(){ea=$.theme?"ui":"fc",c.addClass("fc"),$.isRTL?c.addClass("fc-rtl"):c.addClass("fc-ltr"),$.theme?c.addClass("ui-widget"):c.addClass("fc-unthemed"),da=a("<div class='fc-view-container'/>").prependTo(c),ba=new i(Y,$),ca=ba.render(),ca&&c.prepend(ca),n($.defaultView),$.handleWindowResize&&(ha=K(s,$.windowResizeDelay),a(window).resize(ha))}function k(){fa&&fa.destroy(),ba.destroy(),da.remove(),c.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),a(window).unbind("resize",ha)}function m(){return c.is(":visible")}function n(a){o(0,a)}function o(b,c){ma++,b===!0&&(c=c||fa.name,fa.name=b=void 0),fa&&c&&fa.name!==c&&(ba.deactivateButton(fa.name),R(),fa.start&&fa.destroy(),fa.el.remove(),fa=null),!fa&&c&&(fa=new Na[c](Y),fa.el=a("<div class='fc-view fc-"+c+"-view' />").appendTo(da),ba.activateButton(c)),fa&&(b&&(ia=fa.incrementDate(ia,b)),fa.start&&!b&&ia.isWithin(fa.intervalStart,fa.intervalEnd)||m()&&(R(),fa.start&&fa.destroy(),fa.render(ia),S(),A(),B(),w())),S(),ma--}function p(a){if(m())return a&&r(),ma++,fa.updateSize(!0),ma--,!0}function q(){m()&&r()}function r(){ga="number"==typeof $.contentHeight?$.contentHeight:"number"==typeof $.height?$.height-(ca?ca.outerHeight(!0):0):Math.round(da.width()/Math.max($.aspectRatio,.5))}function s(a){!ma&&a.target===window&&fa.start&&p(!0)&&fa.trigger("windowResize",la)}function t(){v(),x()}function u(){m()&&(R(),fa.destroyEvents(),fa.renderEvents(a.grep(na,function(a){var b=a.end;return b||(b=fa.calendar.getEventEnd(a)),b>fa.start&&a.start<fa.end})),S())}function v(){R(),fa.destroyEvents(),S()}function w(){!$.lazyFetching||ja(fa.start,fa.end)?x():u()}function x(){ka(fa.start,fa.end)}function y(a){na=a,u()}function z(){u()}function A(){ba.updateTitle(fa.title)}function B(){var a=Y.getNow();a.isWithin(fa.intervalStart,fa.intervalEnd)?ba.disableButton("today"):ba.enableButton("today")}function C(a,b){a=Y.moment(a),b=b?Y.moment(b):a.hasTime()?a.clone().add(Y.defaultTimedEventDuration):a.clone().add(Y.defaultAllDayEventDuration),fa.select(a,b)}function E(){fa&&fa.unselect()}function F(){o(-1)}function G(){o(1)}function H(){ia.add(-1,"years"),o()}function J(){ia.add(1,"years"),o()}function L(){ia=Y.getNow(),o()}function M(a){ia=Y.moment(a),o()}function N(a){ia.add(b.duration(a)),o()}function O(a,b){var c,d;b&&void 0!==Na[b]||(b=b||"day",c=ba.getViewsWithButtons().join(" "),d=c.match(new RegExp("\\w+"+I(b))),d||(d=c.match(/\w+Day/)),b=d?d[0]:"agendaDay"),ia=a,n(b)}function P(){return ia.clone()}function R(){da.css({width:"100%",height:da.height(),overflow:"hidden"})}function S(){da.css({width:"",height:"",overflow:""})}function U(){return Y}function V(){return fa}function W(a,b){return void 0===b?$[a]:void("height"!=a&&"contentHeight"!=a&&"aspectRatio"!=a||($[a]=b,p(!0)))}function X(a,b){if($[a])return $[a].apply(b||la,Array.prototype.slice.call(arguments,2))}var Y=this;d=d||{};var Z,$=f({},Ja,d);Z=$.lang in Ka?Ka[$.lang]:Ka[Ja.lang],Z&&($=f({},Ja,Z,d)),$.isRTL&&($=f({},Ja,La,Z||{},d)),Y.options=$,Y.render=g,Y.destroy=k,Y.refetchEvents=t,Y.reportEvents=y,Y.reportEventChange=z,Y.rerenderEvents=u,Y.changeView=n,Y.select=C,Y.unselect=E,Y.prev=F,Y.next=G,Y.prevYear=H,Y.nextYear=J,Y.today=L,Y.gotoDate=M,Y.incrementDate=N,Y.zoomTo=O,Y.getDate=P,Y.getCalendar=U,Y.getView=V,Y.option=W,Y.trigger=X;var _=D(e($.lang));if($.monthNames&&(_._months=$.monthNames),$.monthNamesShort&&(_._monthsShort=$.monthNamesShort),$.dayNames&&(_._weekdays=$.dayNames),$.dayNamesShort&&(_._weekdaysShort=$.dayNamesShort),null!=$.firstDay){var aa=D(_._week);aa.dow=$.firstDay,_._week=aa}Y.defaultAllDayEventDuration=b.duration($.defaultAllDayEventDuration),Y.defaultTimedEventDuration=b.duration($.defaultTimedEventDuration),Y.moment=function(){var a;return"local"===$.timezone?(a=Ma.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===$.timezone?Ma.moment.utc.apply(null,arguments):Ma.moment.parseZone.apply(null,arguments),"_locale"in a?a._locale=_:a._lang=_,a},Y.getIsAmbigTimezone=function(){return"local"!==$.timezone&&"UTC"!==$.timezone},Y.rezoneDate=function(a){return Y.moment(a.toArray())},Y.getNow=function(){var a=$.now;return"function"==typeof a&&(a=a()),Y.moment(a)},Y.calculateWeekNumber=function(a){var b=$.weekNumberCalculation;return"function"==typeof b?b(a):"local"===b?a.week():"ISO"===b.toUpperCase()?a.isoWeek():void 0},Y.getEventEnd=function(a){return a.end?a.end.clone():Y.getDefaultEventEnd(a.allDay,a.start)},Y.getDefaultEventEnd=function(a,b){var c=b.clone();return a?c.stripTime().add(Y.defaultAllDayEventDuration):c.add(Y.defaultTimedEventDuration),Y.getIsAmbigTimezone()&&c.stripZone(),c},Y.formatRange=function(a,b,c){return"function"==typeof c&&(c=c.call(Y,$,_)),T(a,b,c,null,$.isRTL)},Y.formatDate=function(a,b){return"function"==typeof b&&(b=b.call(Y,$,_)),Q(a,b)},j.call(Y,$),l.call(Y,$);var ba,ca,da,ea,fa,ga,ha,ia,ja=Y.isFetchNeeded,ka=Y.fetchEvents,la=c[0],ma=0,na=[];if(ia=null!=$.defaultDate?Y.moment($.defaultDate):Y.getNow(),$.annotations){for(var oa={day:[],timed:[]},pa=0;pa<$.annotations.length;pa++){var qa=$.annotations[pa];qa.start&&(qa.start=Y.moment(qa.start)),qa.end&&(qa.end=Y.moment(qa.end)),qa.allDay?oa.day.push(qa):oa.timed.push(qa)}$.annotations=oa}Y.getSuggestedViewHeight=function(){return void 0===ga&&q(),ga},Y.isHeightAuto=function(){return"auto"===$.contentHeight||"auto"===$.height}}function i(b,c){function d(){var b=c.header;if(n=c.theme?"ui":"fc",b)return o=a("<div class='fc-toolbar'/>").append(f("left")).append(f("right")).append(f("center")).append('<div class="fc-clear"/>')}function e(){o.remove()}function f(d){var e=a('<div class="fc-'+d+'"/>'),f=c.header[d];return f&&a.each(f.split(" "),function(d){var f,g=a(),h=!0;a.each(this.split(","),function(d,e){var f,i,j,k,l,m,o,q;"title"==e?(g=g.add(a("<h2>&nbsp;</h2>")),h=!1):(b[e]?f=function(){b[e]()}:Na[e]&&(f=function(){b.changeView(e)},p.push(e)),f&&(i=z(c.themeButtonIcons,e),j=z(c.buttonIcons,e),k=z(c.defaultButtonText,e),l=z(c.buttonText,e),m=l?G(l):i&&c.theme?"<span class='ui-icon ui-icon-"+i+"'></span>":j&&!c.theme?"<span class='fc-icon fc-icon-"+j+"'></span>":G(k||e),o=["fc-"+e+"-button",n+"-button",n+"-state-default"],q=a('<button type="button" class="'+o.join(" ")+'">'+m+"</button>").click(function(){q.hasClass(n+"-state-disabled")||(f(),(q.hasClass(n+"-state-active")||q.hasClass(n+"-state-disabled"))&&q.removeClass(n+"-state-hover"))}).mousedown(function(){q.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-down")}).mouseup(function(){q.removeClass(n+"-state-down")}).hover(function(){q.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-hover")},function(){q.removeClass(n+"-state-hover").removeClass(n+"-state-down")}),g=g.add(q)))}),h&&g.first().addClass(n+"-corner-left").end().last().addClass(n+"-corner-right").end(),g.length>1?(f=a("<div/>"),h&&f.addClass("fc-button-group"),f.append(g),e.append(f)):e.append(g)}),e}function g(a){o.find("h2").text(a)}function h(a){o.find(".fc-"+a+"-button").addClass(n+"-state-active")}function i(a){o.find(".fc-"+a+"-button").removeClass(n+"-state-active")}function j(a){o.find(".fc-"+a+"-button").attr("disabled","disabled").addClass(n+"-state-disabled")}function k(a){o.find(".fc-"+a+"-button").removeAttr("disabled").removeClass(n+"-state-disabled")}function l(){return p}var m=this;m.render=d,m.destroy=e,m.updateTitle=g,m.activateButton=h,m.deactivateButton=i,m.disableButton=j,m.enableButton=k,m.getViewsWithButtons=l;var n,o=a(),p=[]}function j(c){function d(a,b){return!M||a.clone().stripZone()<M.clone().stripZone()||b.clone().stripZone()>N.clone().stripZone()}function e(a,b){M=a,N=b,X=[];var c=++U,d=T.length;V=d;for(var e=0;e<d;e++)f(T[e],c)}function f(b,c){g(b,function(d){var e,f,g,h=a.isArray(b.events);if(c==U){if(d)for(e=0;e<d.length;e++)f=d[e],g=h?f:u(f,b),g&&X.push.apply(X,w(g));V--,V||Q(X)}})}function g(b,d){var e,f,h=Ma.sourceFetchers;for(e=0;e<h.length;e++){if(f=h[e].call(L,b,M.clone(),N.clone(),c.timezone,d),f===!0)return;if("object"==typeof f)return void g(f,d)}var i=b.events;if(i)a.isFunction(i)?(s(),i.call(L,M.clone(),N.clone(),c.timezone,function(a){d(a),t()})):a.isArray(i)?d(i):d();else{var j=b.url;if(j){var k,l=b.success,m=b.error,n=b.complete;k=a.isFunction(b.data)?b.data():b.data;var o=a.extend({},k||{}),p=F(b.startParam,c.startParam),q=F(b.endParam,c.endParam),r=F(b.timezoneParam,c.timezoneParam);p&&(o[p]=M.format()),q&&(o[q]=N.format()),c.timezone&&"local"!=c.timezone&&(o[r]=c.timezone),s(),a.ajax(a.extend({},Oa,b,{data:o,success:function(b){b=b||[];var c=E(l,this,arguments);a.isArray(c)&&(b=c),d(b)},error:function(){E(m,this,arguments),d()},complete:function(){E(n,this,arguments),t()}}))}else d()}}function h(a){var b=i(a);b&&(T.push(b),V++,f(b,U))}function i(b){var c,d,e=Ma.sourceNormalizers;if(a.isFunction(b)||a.isArray(b)?c={events:b}:"string"==typeof b?c={url:b}:"object"==typeof b&&(c=a.extend({},b)),c){for(c.className?"string"==typeof c.className&&(c.className=c.className.split(/\s+/)):c.className=[],a.isArray(c.events)&&(c.origArray=c.events,c.events=a.map(c.events,function(a){return u(a,c)})),d=0;d<e.length;d++)e[d].call(L,c);return c}}function j(b){T=a.grep(T,function(a){return!l(a,b)}),X=a.grep(X,function(a){return!l(a.source,b)}),Q(X)}function l(a,b){return a&&b&&m(a)==m(b)}function m(a){return("object"==typeof a?a.origArray||a.googleCalendarId||a.url||a.events:null)||a}function n(a){a.start=L.moment(a.start),a.end&&(a.end=L.moment(a.end)),x(a),o(a),Q(X)}function o(a){var b,c,d,e;for(b=0;b<X.length;b++)if(c=X[b],c._id==a._id&&c!==a)for(d=0;d<Y.length;d++)e=Y[d],void 0!==a[e]&&(c[e]=a[e])}function p(a,b){var c,d,e,f=u(a);if(f){for(c=w(f),d=0;d<c.length;d++)e=c[d],e.source||(b&&(S.events.push(e),e.source=S),X.push(e));return Q(X),c}return[]}function q(b){var c,d;for(null==b?b=function(){return!0}:a.isFunction(b)||(c=b+"",b=function(a){return a._id==c}),X=a.grep(X,b,!0),d=0;d<T.length;d++)a.isArray(T[d].events)&&(T[d].events=a.grep(T[d].events,b,!0));Q(X)}function r(b){return a.isFunction(b)?a.grep(X,b):null!=b?(b+="",a.grep(X,function(a){return a._id==b})):X}function s(){W++||O("loading",null,!0,P())}function t(){--W||O("loading",null,!1,P())}function u(d,e){var f,g,h,i,j={};if(c.eventDataTransform&&(d=c.eventDataTransform(d)),e&&e.eventDataTransform&&(d=e.eventDataTransform(d)),a.extend(j,d),e&&(j.source=e),j._id=d._id||(void 0===d.id?"_fc"+Pa++:d.id+""),d.className?"string"==typeof d.className?j.className=d.className.split(/\s+/):j.className=d.className:j.className=[],j.resources=j.resources||[],"string"==typeof j.resources&&(j.resources=j.resources.split(/\s+/)),f=d.start||d.date,g=d.end,C(f)&&(f=b.duration(f)),C(g)&&(g=b.duration(g)),d.dow||b.isDuration(f)||b.isDuration(g))j.start=f?b.duration(f):null,j.end=g?b.duration(g):null,j._recurring=!0;else{if(f&&(f=L.moment(f),!f.isValid()))return!1;g&&(g=L.moment(g),g.isValid()||(g=null)),h=d.allDay,void 0===h&&(i=F(e?e.allDayDefault:void 0,c.allDayDefault),h=void 0!==i?i:!(f.hasTime()||g&&g.hasTime())),v(f,g,h,j)}return j}function v(a,b,d,e){d?(a.hasTime()&&a.stripTime(),b&&b.hasTime()&&b.stripTime()):(a.hasTime()||(a=L.rezoneDate(a)),b&&!b.hasTime()&&(b=L.rezoneDate(b))),b&&b<=a&&(b=null),e.allDay=d,e.start=a,e.end=b||null,c.forceEventDuration&&!e.end&&(e.end=R(e)),k(e)}function w(b,c,d){var e,f,g,h,i,j,k,l,m,n=[];if(c=c||M,d=d||N,b)if(b._recurring){if(f=b.dow)for(e={},g=0;g<f.length;g++)e[f[g]]=!0;for(h=c.clone().stripTime();h.isBefore(d);)e&&!e[h.day()]||(i=b.start,j=b.end,k=h.clone(),l=null,i&&(k=k.time(i)),j&&(l=h.clone().time(j)),m=a.extend({},b),v(k,l,!i&&!j,m),n.push(m)),h.add(1,"days")}else n.push(b);return n}function x(a,b,c){var d,e,f,g,h=a._allDay,i=a._start,j=a._end,k=!1;return b||c||(b=a.start,c=a.end),d=a.allDay!=h?a.allDay:!(b||c).hasTime(),d&&(b&&(b=b.clone().stripTime()),c&&(c=c.clone().stripTime())),b&&(e=d?A(b,i.clone().stripTime()):A(b,i)),d!=h?k=!0:c&&(f=A(c||L.getDefaultEventEnd(d,b||i),b||i).subtract(A(j||L.getDefaultEventEnd(h,i),i))),g=y(r(a._id),k,d,e,f),{dateDelta:e,durationDelta:f,undo:g}}function y(b,d,e,f,g){var h=L.getIsAmbigTimezone(),i=[];return a.each(b,function(a,b){var j=b._allDay,l=b._start,m=b._end,n=null!=e?e:j,o=l.clone(),p=!d&&m?m.clone():null;n?(o.stripTime(),p&&p.stripTime()):(o.hasTime()||(o=L.rezoneDate(o)),p&&!p.hasTime()&&(p=L.rezoneDate(p))),p||!c.forceEventDuration&&!+g||(p=L.getDefaultEventEnd(n,o)),o.add(f),p&&p.add(f).add(g),h&&(+f||+g)&&(o.stripZone(),p&&p.stripZone()),b.allDay=n,b.start=o,b.end=p,k(b),i.push(function(){b.allDay=j,b.start=l,b.end=m,k(b)})}),function(){for(var a=0;a<i.length;a++)i[a]()}}function z(){var b,d=c.businessHours,e={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},f=L.getView();return d&&(b="object"==typeof d?a.extend({},e,d):e),b?w(u(b),f.start,f.end):[]}function B(a,b,d){var e=a.source||{},f=F(a.constraint,e.constraint,c.eventConstraint),g=F(a.overlap,e.overlap,c.eventOverlap);return H(b,d,f,g,a)}function D(a,b){return H(a,b,c.selectConstraint,c.selectOverlap)}function G(a,b,c){var d;return c&&(d=w(u(c))[0])?B(d,a,b):D(a,b)}function H(a,b,c,d,e){var f,g,h,i,j;if(a=a.clone().stripZone(),b=b.clone().stripZone(),null!=c){for(f=I(c),g=!1,h=0;h<f.length;h++)if(J(f[h],a,b)){g=!0;break}if(!g)return!1}for(h=0;h<X.length;h++)if(i=X[h],(!e||e._id!==i._id)&&K(i,a,b)){if(d===!1)return!1;if("function"==typeof d&&!d(i,e))return!1;if(e){if(j=F(i.overlap,(i.source||{}).overlap),j===!1)return!1;if("function"==typeof j&&!j(e,i))return!1}}return!0}function I(a){return"businessHours"===a?z():"object"==typeof a?w(u(a)):r(a)}function J(a,b,c){var d=a.start.clone().stripZone(),e=L.getEventEnd(a).stripZone();return b>=d&&c<=e}function K(a,b,c){var d=a.start.clone().stripZone(),e=L.getEventEnd(a).stripZone();return b<e&&c>d}var L=this;L.isFetchNeeded=d,L.fetchEvents=e,L.addEventSource=h,L.removeEventSource=j,L.updateEvent=n,L.renderEvent=p,L.removeEvents=q,L.clientEvents=r,L.mutateEvent=x;var M,N,O=L.trigger,P=L.getView,Q=L.reportEvents,R=L.getEventEnd,S={events:[]},T=[S],U=0,V=0,W=0,X=[];a.each((c.events?[c.events]:[]).concat(c.eventSources||[]),function(a,b){var c=i(b);c&&T.push(c)});var Y=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"];L.getBusinessHoursEvents=z,L.isEventAllowedInRange=B,L.isSelectionAllowedInRange=D,L.isExternalDragAllowedInRange=G}function k(a){a._allDay=a.allDay,a._start=a.start.clone(),a._end=a.end?a.end.clone():null}function l(b){function c(b){l=[];var c;if(a.isFunction(b))c={resources:b},l.push(c),j=void 0;else if("string"==typeof b)c={url:b},l.push(c),j=void 0;else if("object"==typeof b&&null!=b){for(var d=0;d<b.length;d++){var e=b[d];f(e),c={resources:e},l.push(c)}j=void 0}}function d(c,d){var f;if(c||void 0===c||void 0===j){j=[];for(var g=l.length,h=0;h<g;h++)j=j.concat(e(l[h],d))}return f=a.isFunction(b.resourceFilter)?a.grep(j,b.resourceFilter):j,a.isFunction(b.resourceSort)&&f.sort(b.resourceSort),f}function e(c,d){var e=c.resources;if(e){if(a.isFunction(e))return e()}else{var f=c.url;if(f){var g={};if("object"==typeof d){var h=b.startParam,i=b.endParam;h&&(g[h]=Math.round(+d.intervalStart/1e3)),i&&(g[i]=Math.round(+d.intervalEnd/1e3))}a.ajax(a.extend({},Oa,c,{data:g,dataType:"json",cache:!1,success:function(a){a=a||[],e=a},error:function(){},async:!1}))}}return e}function f(a){a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):a.className=[];for(var b=Ma.sourceNormalizers,c=0;c<b.length;c++)b[c](a)}function g(a,b,c,d){var e,f,g,j,k=a._allDay,l=a._start,m=a._end,n=!1;return c||d||(c=a.start,d=a.end),e=a.allDay!=k?a.allDay:!(c||d).hasTime(),e&&(c&&(c=c.clone().stripTime()),d&&(d=d.clone().stripTime())),c&&(f=e?A(c,l.clone().stripTime()):A(c,l)),e!=k?n=!0:d&&(g=A(d||i.getDefaultEventEnd(e,c||l),c||l).subtract(A(m||i.getDefaultEventEnd(k,l),l))),j=h(i.clientEvents(a._id),n,e,f,g,b),{dateDelta:f,durationDelta:g,undo:j}}function h(c,d,e,f,g,h){var j=i.getIsAmbigTimezone(),l=[];return a.each(c,function(a,c){var m=c.resources,n=c._allDay,o=c._start,p=c._end,q=null!=e?e:n,r=o.clone(),s=!d&&p?p.clone():null;q?(r.stripTime(),s&&s.stripTime()):(r.hasTime()||(r=i.rezoneDate(r)),s&&!s.hasTime()&&(s=i.rezoneDate(s))),s||!b.forceEventDuration&&!+g||(s=i.getDefaultEventEnd(q,r)),r.add(f),s&&s.add(f).add(g),j&&(+f||+g)&&(r.stripZone(),s&&s.stripZone()),c.allDay=q,c.start=r,c.end=s,c.resources=h,k(c),l.push(function(){c.allDay=n,c.start=o,c.end=p,c.resources=m,k(c)})}),function(){for(var a=0;a<l.length;a++)l[a]()}}var i=this;i.fetchResources=d,i.setResources=c,i.mutateResourceEvent=g;var j,l=[];c(b.resources)}function m(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1}),b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function n(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function o(){a("body").addClass("fc-not-allowed")}function p(){a("body").removeClass("fc-not-allowed")}function q(b,c,d){var e=Math.floor(c/b.length),f=Math.floor(c-e*(b.length-1)),g=[],h=[],i=[],j=0;r(b),b.each(function(c,d){var k=c===b.length-1?f:e,l=a(d).outerHeight(!0);l<k?(g.push(d),h.push(l),i.push(a(d).height())):j+=l}),d&&(c-=j,e=Math.floor(c/g.length),f=Math.floor(c-e*(g.length-1))),a(g).each(function(b,c){var d=b===g.length-1?f:e,j=h[b],k=i[b],l=d-(j-k);j<d&&a(c).height(l)})}function r(a){a.height("")}function s(b){var c=0;return b.find("> *").each(function(b,d){var e=a(d).outerWidth();e>c&&(c=e)}),c++,b.width(c),c}function t(a,b){return a.height(b).addClass("fc-scroller"),a[0].scrollHeight-1>a[0].clientHeight||(u(a),!1)}function u(a){a.height("").removeClass("fc-scroller")}function v(b){var c=b.css("position"),d=b.parents().filter(function(){var b=a(this);return/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&d.length?d:a(b[0].ownerDocument||document)}function w(a){var b=a.offset().left,c=b+a.width(),d=a.children(),e=d.offset().left,f=e+d.outerWidth();return{left:e-b,right:c-f}}function x(a){return 1==a.which&&!a.ctrlKey}function y(a,b,c,d){var e,f,g,h;if(b>c&&a<d)return a>=c?(e=a.clone(),g=!0):(e=c.clone(),g=!1),b<=d?(f=b.clone(),h=!0):(f=d.clone(),h=!1),{start:e,end:f,isStart:g,isEnd:h}}function z(a,b){if(a=a||{},void 0!==a[b])return a[b];for(var c,d=b.split(/(?=[A-Z])/),e=d.length-1;e>=0;e--)if(c=a[d[e].toLowerCase()],void 0!==c)return c;return a.default}function A(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days"),ms:a.time()-c.time()})}function B(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function C(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function D(a){var b=function(){};return b.prototype=a,new b}function E(b,c,d){if(a.isFunction(b)&&(b=[b]),b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function F(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function G(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function H(a){return a.replace(/&.*?;/g,"")}function I(a){return a.charAt(0).toUpperCase()+a.slice(1)}function J(a,b){return a-b}function K(a,b){var c,d,e,f,g=function(){var h=+new Date-f;h<b&&h>0?c=setTimeout(g,b-h):(c=null,a.apply(e,d),c||(e=d=null))};return function(){e=this,d=arguments,f=+new Date,c||(c=setTimeout(g,b))}}function L(c,d,e){var f,g,h,i,j=c[0],k=1==c.length&&"string"==typeof j;return b.isMoment(j)?(i=b.apply(null,c),N(j,i)):B(j)||void 0===j?i=b.apply(null,c):(f=!1,g=!1,k?Ua.test(j)?(j+="-01",c=[j],f=!0,g=!0):(h=Va.exec(j))&&(f=!h[5],g=!0):a.isArray(j)&&(g=!0),i=d?b.utc.apply(b,c):b.apply(null,c),f?(i._ambigTime=!0,i._ambigZone=!0):e&&(g?i._ambigZone=!0:k&&i.utcOffset(j))),i._fullCalendar=!0,i}function M(a,b){var c,d=[],e=!1,f=!1;for(c=0;c<a.length;c++)d.push(Ma.moment.parseZone(a[c])),e=e||d[c]._ambigTime,f=f||d[c]._ambigZone;for(c=0;c<d.length;c++)e&&!b?d[c].stripTime():f&&d[c].stripZone();return d}function N(a,b){a._ambigTime?b._ambigTime=!0:b._ambigTime&&(b._ambigTime=!1),a._ambigZone?b._ambigZone=!0:b._ambigZone&&(b._ambigZone=!1)}function O(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}function P(a,b){return Xa.format.call(a,b)}function Q(a,b){return R(a,W(b))}function R(a,b){var c,d="";for(c=0;c<b.length;c++)d+=S(a,b[c]);return d}function S(a,b){var c,d;return"string"==typeof b?b:(c=b.token)?Ya[c]?Ya[c](a):P(a,c):b.maybe&&(d=R(a,b.maybe),d.match(/[1-9]/))?d:""}function T(a,b,c,d,e){var f;return a=Ma.moment.parseZone(a),b=Ma.moment.parseZone(b),f=(a.localeData||a.lang).call(a),c=f.longDateFormat(c)||c,d=d||" - ",U(a,b,W(c),d,e)}function U(a,b,c,d,e){var f,g,h,i,j="",k="",l="",m="",n="";for(g=0;g<c.length&&(f=V(a,b,c[g]),f!==!1);g++)j+=f;for(h=c.length-1;h>g&&(f=V(a,b,c[h]),f!==!1);h--)k=f+k;for(i=g;i<=h;i++)l+=S(a,c[i]),m+=S(b,c[i]);return(l||m)&&(n=e?m+d+l:l+d+m),j+n+k}function V(a,b,c){var d,e;return"string"==typeof c?c:!!((d=c.token)&&(e=Za[d.charAt(0)],e&&a.isSame(b,e)))&&P(a,d)}function W(a){return a in $a?$a[a]:$a[a]=X(a)}function X(a){for(var b,c=[],d=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;b=d.exec(a);)b[1]?c.push(b[1]):b[2]?c.push({maybe:X(b[2])}):b[3]?c.push({token:b[3]}):b[5]&&c.push(b[5]);return c}function Y(a){this.options=a||{}}function Z(a){this.grid=a}function $(a){this.coordMaps=a}function _(a,b){this.coordMap=a,this.options=b||{}}function aa(a,b){return!a&&!b||!(!a||!b)&&(a.grid===b.grid&&a.row===b.row&&a.col===b.col)}function ba(b,c){this.options=c=c||{},this.sourceEl=b,this.parentEl=c.parentEl?a(c.parentEl):b.parent()}function ca(a){this.view=a}function da(a){ca.call(this,a),this.coordMap=new Z(this),this.elsByFill={}}function ea(a){var b=ga(a);return"background"===b||"inverse-background"===b}function fa(a){return"inverse-background"===ga(a)}function ga(a){return F((a.source||{}).rendering,a.rendering)}function ha(a){var b,c,d={};for(b=0;b<a.length;b++)c=a[b],(d[c._id]||(d[c._id]=[])).push(c);return d}function ia(a,b){return a.eventStartMS-b.eventStartMS}function ja(a,b){var c=a.event||a.annotation,d=b.event||b.annotation;return!!b.annotation-!!a.annotation||a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||d.allDay-c.allDay||(c.title||"").localeCompare(d.title)}function ka(a){da.call(this,a)}function la(a,b){var c,d;for(c=0;c<b.length;c++)if(d=b[c],d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0;return!1}function ma(a,b){return a.leftCol-b.leftCol}function na(a){da.call(this,a)}function oa(a){var b,c,d;if(a.sort(ja),b=pa(a),qa(b),c=b[0]){for(d=0;d<c.length;d++)ra(c[d]);for(d=0;d<c.length;d++)sa(c[d],0,0)}}function pa(a){var b,c,d,e=[];for(b=0;b<a.length;b++){for(c=a[b],d=0;d<e.length&&ta(c,e[d]).length;d++);c.level=d,(e[d]||(e[d]=[])).push(c)}return e}function qa(a){var b,c,d,e,f;for(b=0;b<a.length;b++)for(c=a[b],d=0;d<c.length;d++)for(e=c[d],e.forwardSegs=[],f=b+1;f<a.length;f++)ta(e,a[f],e.forwardSegs)}function ra(a){var b,c,d=a.forwardSegs,e=0;if(void 0===a.forwardPressure){for(b=0;b<d.length;b++)c=d[b],ra(c),e=Math.max(e,1+c.forwardPressure);a.forwardPressure=e}}function sa(a,b,c){var d,e=a.forwardSegs;if(void 0===a.forwardCoord)for(e.length?(e.sort(va),sa(e[0],b+1,c),a.forwardCoord=e[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),d=0;d<e.length;d++)sa(e[d],0,a.forwardCoord)}function ta(a,b,c){c=c||[];for(var d=0;d<b.length;d++)ua(a,b[d])&&c.push(b[d]);return c}function ua(a,b){return a.bottom>b.top&&a.top<b.bottom}function va(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||ja(a,b)}function wa(c){function d(b){var c=B[b];return a.isPlainObject(c)&&!g(b)?z(c,y.name):c}function e(a,b){return c.trigger.apply(c,[a,b||y].concat(Array.prototype.slice.call(arguments,2),[y]))}function f(a){var b=a.source||{};return F(a.startEditable,b.startEditable,d("eventStartEditable"),a.editable,b.editable,d("editable"))}function h(a){var b=a.source||{};return F(a.durationEditable,b.durationEditable,d("eventDurationEditable"),a.editable,b.editable,d("editable"))}function i(a,b,d,f){var g=c.mutateEvent(b,d,null);e("eventDrop",a,b,g.dateDelta,function(){g.undo(),A()},f,{}),A()}function j(a,b,d,f){var g=c.mutateEvent(b,null,d);e("eventResize",a,b,g.durationDelta,function(){g.undo(),A()},f,{}),A()}function k(a){return b.isMoment(a)&&(a=a.day()),G[a]}function l(){return D}function m(a,b,c){var d=a.clone();for(b=b||1;G[(d.day()+(c?b:0)+7)%7];)d.add(b,"days");return d}function n(){var a=o.apply(null,arguments),b=p(a),c=q(b);return c}function o(a,b){var c=y.colCnt,d=K?-1:1,e=K?c-1:0;"object"==typeof a&&(b=a.col,a=a.row);var f=a*c+(b*d+e);return f}function p(a){var b=y.start.day();return a+=H[b],7*Math.floor(a/D)+I[(a%D+D)%D]-b}function q(a){return y.start.clone().add(a,"days")}function r(a){var b=s(a),c=t(b),d=u(c);return d}function s(a){return a.clone().stripTime().diff(y.start,"days")}function t(a){var b=y.start.day();return a+=b,Math.floor(a/7)*D+H[(a%7+7)%7]-H[b]}function u(a){var b=y.colCnt,c=K?-1:1,d=K?b-1:0,e=Math.floor(a/b),f=(a%b+b)%b*c+d;return{row:e,col:f}}function v(a,b){for(var c=y.rowCnt,d=y.colCnt,e=[],f=w(a,b),g=s(f.start),h=s(f.end),i=t(g),j=t(h)-1,k=0;k<c;k++){var l=k*d,m=l+d-1,n=Math.max(i,l),o=Math.min(j,m);if(n<=o){var q=u(n),r=u(o),v=[q.col,r.col].sort(J),x=p(n)==g,z=p(o)+1==h;e.push({row:k,leftCol:v[0],rightCol:v[1],isStart:x,isEnd:z})}}return e}function w(a,b){var c,d,e=a.clone().stripTime();return b&&(c=b.clone().stripTime(),d=+b.time(),d&&d>=C&&c.add(1,"days")),(!b||c<=e)&&(c=e.clone().add(1,"days")),{start:e,end:c}}function x(a){var b=w(a.start,a.end);return b.end.diff(b.start,"days")>1}var y=this;y.calendar=c,y.opt=d,y.trigger=e,y.isEventDraggable=f,y.isEventResizable=h,y.eventDrop=i,y.eventResize=j;var A=c.reportEventChange,B=c.options,C=b.duration(B.nextDayThreshold);y.init(),y.getEventTimeText=function(a,b){var e,f;return"object"==typeof a&&"object"==typeof b?(e=a,f=b,b=arguments[2]):(e=a.start,f=a.end),b=b||d("timeFormat"),f&&d("displayEventEnd")?c.formatRange(e,f,b):c.formatDate(e,b)},y.isHiddenDay=k,y.skipHiddenDays=m,y.getCellsPerWeek=l,y.dateToCell=r,y.dateToDayOffset=s,y.dayOffsetToCellOffset=t,y.cellOffsetToCell=u,y.cellToDate=n,y.cellToCellOffset=o,y.cellOffsetToDayOffset=p,y.dayOffsetToDate=q,y.rangeToSegments=v,y.isMultiDayEvent=x;var D,E=d("hiddenDays")||[],G=[],H=[],I=[],K=d("isRTL");!function(){d("weekends")===!1&&E.push(0,6);for(var b=0,c=0;b<7;b++)H[b]=c,G[b]=a.inArray(b,E)!=-1,G[b]||(I[c]=b,c++);if(D=c,!D)throw"invalid hiddenDays"}()}function xa(c){var d,e,f,g,h=Ma.dataAttrPrefix;return h&&(h+="-"),d=c.data(h+"event")||null,d&&(d="object"==typeof d?a.extend({},d):{},e=d.start,null==e&&(e=d.time),f=d.duration,g=d.stick,delete d.start,delete d.time,delete d.duration,delete d.stick),null==e&&(e=c.data(h+"start")),null==e&&(e=c.data(h+"time")),null==f&&(f=c.data(h+"duration")),null==g&&(g=c.data(h+"stick")),e=null!=e?b.duration(e):null,f=null!=f?b.duration(f):null,g=Boolean(g),{eventProps:d,startTime:e,duration:f,stick:g}}function ya(a){wa.call(this,a),this.dayGrid=new ka(this),this.coordMap=this.dayGrid.coordMap}function za(a){ya.call(this,a)}function Aa(a){ya.call(this,a)}function Ba(a){ya.call(this,a)}function Ca(a,b){return b.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function Da(a,b){return b.longDateFormat("LT").replace(/\s*a$/i,"")}function Ea(a){wa.call(this,a),this.timeGrid=new na(this),this.opt("allDaySlot")?(this.dayGrid=new ka(this),this.coordMap=new $([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap}function Fa(a){Ea.call(this,a)}function Ga(a){Ea.call(this,a)}function Ha(a){Ea.call(this,a),this.cellToDate=function(){return this.start.clone()}}function Ia(b){Ha.call(this,b);var c=this.rangeToSegments;this.rangeToSegments=function(b,d){var e=this.colCnt,f=[];return a.each(c(b,d),function(a,b){for(var c=0;c<e;c++)f.push({row:b.row,leftCol:c,rightCol:c,isStart:b.isStart,isEnd:b.isEnd})}),f}}var Ja={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL",resourceDay:"LL - dddd"},columnFormat:{month:"ddd",week:d,day:"dddd"},timeFormat:{default:c},displayEventEnd:{month:!1,basicWeek:!1,default:!0},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",annotations:[],eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},Ka={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}},La={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},Ma=a.fullCalendar={version:"2.2.3"},Na=Ma.views={};a.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1),d=this;return this.each(function(e,f){var g,i=a(f),j=i.data("fullCalendar");"string"==typeof b?j&&a.isFunction(j[b])&&(g=j[b].apply(j,c),e||(d=g),"destroy"===b&&i.removeData("fullCalendar")):j||(j=new h(i,b),i.data("fullCalendar",j),j.render())}),d},Ma.langs=Ka,Ma.datepickerLang=function(b,c,d){var e=Ka[b];e||(e=Ka[b]={}),f(e,{isRTL:d.isRTL,weekNumberTitle:d.weekHeader,titleFormat:{month:d.showMonthAfterYear?"YYYY["+d.yearSuffix+"] MMMM":"MMMM YYYY["+d.yearSuffix+"]"},defaultButtonText:{prev:H(d.prevText),next:H(d.nextText),today:H(d.currentText)}}),a.datepicker&&(a.datepicker.regional[c]=a.datepicker.regional[b]=d,a.datepicker.regional.en=a.datepicker.regional[""],a.datepicker.setDefaults(d))},Ma.lang=function(a,b){var c;b&&(c=Ka[a],c||(c=Ka[a]={}),f(c,b||{})),Ja.lang=a},Ma.sourceNormalizers=[],Ma.sourceFetchers=[];var Oa={dataType:"json",cache:!1},Pa=1,Qa=["sun","mon","tue","wed","thu","fri","sat"];Ma.applyAll=E;var Ra,Sa,Ta,Ua=/^\s*\d{4}-\d\d$/,Va=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,Wa=b.fn,Xa=a.extend({},Wa);Ma.moment=function(){return L(arguments)},Ma.moment.utc=function(){var a=L(arguments,!0);return a.hasTime()&&a.utc(),a},Ma.moment.parseZone=function(){return L(arguments,!0,!0)},Wa.clone=function(){var a=Xa.clone.apply(this,arguments);return N(this,a),this._fullCalendar&&(a._fullCalendar=!0),a},Wa.time=function(a){if(!this._fullCalendar)return Xa.time.apply(this,arguments);
if(null==a)return b.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,b.isDuration(a)||b.isMoment(a)||(a=b.duration(a));var c=0;return b.isDuration(a)&&(c=24*Math.floor(a.asDays())),this.hours(c+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())},Wa.stripTime=function(){var a=this.toArray();return this.utc(),Sa(this,a.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0,this},Wa.hasTime=function(){return!this._ambigTime},Wa.stripZone=function(){var a=this.toArray(),b=this._ambigTime;return this.utc(),Sa(this,a),b&&(this._ambigTime=!0),this._ambigZone=!0,this},Wa.hasZone=function(){return!this._ambigZone},Wa.utcOffset=function(a){return null!=a&&(this._ambigTime=!1,this._ambigZone=!1),Xa.utcOffset.apply(this,arguments)},Wa.local=function(){var a=this.toArray(),b=this._ambigZone;return Xa.local.apply(this,arguments),b&&Ta(this,a),this},Wa.format=function(){return this._fullCalendar&&arguments[0]?Q(this,arguments[0]):this._ambigTime?P(this,"YYYY-MM-DD"):this._ambigZone?P(this,"YYYY-MM-DD[T]HH:mm:ss"):Xa.format.apply(this,arguments)},Wa.toISOString=function(){return this._ambigTime?P(this,"YYYY-MM-DD"):this._ambigZone?P(this,"YYYY-MM-DD[T]HH:mm:ss"):Xa.toISOString.apply(this,arguments)},Wa.isWithin=function(a,b){var c=M([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]},Wa.isSame=function(a,b){var c;return this._fullCalendar?b?(c=M([this,a],!0),Xa.isSame.call(c[0],c[1],b)):(a=Ma.moment.parseZone(a),Xa.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)):Xa.isSame.apply(this,arguments)},a.each(["isBefore","isAfter"],function(a,b){Wa[b]=function(a,c){var d;return this._fullCalendar?(d=M([this,a]),Xa[b].call(d[0],d[1],c)):Xa[b].apply(this,arguments)}}),Ra="_d"in b()&&"updateOffset"in b,Sa=Ra?function(a,c){a._d.setTime(Date.UTC.apply(Date,c)),b.updateOffset(a,!1)}:O,Ta=Ra?function(a,c){a._d.setTime(+new Date(c[0]||0,c[1]||0,c[2]||0,c[3]||0,c[4]||0,c[5]||0,c[6]||0)),b.updateOffset(a,!1)}:O;var Ya={t:function(a){return P(a,"a").charAt(0)},T:function(a){return P(a,"A").charAt(0)}};Ma.formatRange=T;var Za={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},$a={};Y.prototype={isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var b=this,c=this.options;this.el=a('<div class="fc-popover"/>').addClass(c.className||"").css({top:0,left:0}).append(c.content).appendTo(c.parentEl),this.el.on("click",".fc-close",function(){b.hide()}),c.autoHide&&a(document).on("mousedown",this.documentMousedownProxy=a.proxy(this,"documentMousedown"))},documentMousedown:function(b){this.el&&!a(b.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),a(document).off("mousedown",this.documentMousedownProxy)},position:function(){var b,c,d,e,f,g=this.options,h=this.el.offsetParent().offset(),i=this.el.outerWidth(),j=this.el.outerHeight(),k=a(window),l=v(this.el);e=g.top||0,f=void 0!==g.left?g.left:void 0!==g.right?g.right-i:0,l.is(window)||l.is(document)?(l=k,b=0,c=0):(d=l.offset(),b=d.top,c=d.left),b+=k.scrollTop(),c+=k.scrollLeft(),g.viewportConstrain!==!1&&(e=Math.min(e,b+l.outerHeight()-j-this.margin),e=Math.max(e,b+this.margin),f=Math.min(f,c+l.outerWidth()-i-this.margin),f=Math.max(f,c+this.margin)),this.el.css({top:e-h.top,left:f-h.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}},Z.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]),this.computeBounds()},getCell:function(a,b){var c,d=null,e=this.rows,f=this.cols,g=-1,h=-1;if(this.inBounds(a,b)){for(c=0;c<e.length;c++)if(b>=e[c][0]&&b<e[c][1]){g=c;break}for(c=0;c<f.length;c++)if(a>=f[c][0]&&a<f[c][1]){h=c;break}g>=0&&h>=0&&(d={row:g,col:h},d.grid=this.grid,d.date=this.grid.getCellDate(d))}return d},computeBounds:function(){var a;this.containerEl&&(a=this.containerEl.offset(),this.minX=a.left,this.maxX=a.left+this.containerEl.outerWidth(),this.minY=a.top,this.maxY=a.top+this.containerEl.outerHeight())},inBounds:function(a,b){return!this.containerEl||a>=this.minX&&a<this.maxX&&b>=this.minY&&b<this.maxY}},$.prototype={coordMaps:null,build:function(){var a,b=this.coordMaps;for(a=0;a<b.length;a++)b[a].build()},getCell:function(a,b){var c,d=this.coordMaps,e=null;for(c=0;c<d.length&&!e;c++)e=d[c].getCell(a,b);return e}},_.prototype={coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(a){x(a)&&(a.preventDefault(),this.startListening(a),this.options.distance||this.startDrag(a))},startListening:function(b){var c,d;this.isListening||(b&&this.options.scroll&&(c=v(a(b.target)),c.is(window)||c.is(document)||(this.scrollEl=c,this.scrollHandlerProxy=K(a.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),b&&(d=this.getCell(b),this.origCell=d,this.origDate=d?d.date:null,this.mouseX0=b.pageX,this.mouseY0=b.pageY),a(document).on("mousemove",this.mousemoveProxy=a.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=a.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",b))},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},mousemove:function(a){var b,c;this.isDragging||(b=this.options.distance||1,c=Math.pow(a.pageX-this.mouseX0,2)+Math.pow(a.pageY-this.mouseY0,2),c>=b*b&&this.startDrag(a)),this.isDragging&&this.drag(a)},startDrag:function(a){var b;this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.trigger("dragStart",a),b=this.getCell(a),b&&this.cellOver(b,!0))},drag:function(a){var b;this.isDragging&&(b=this.getCell(a),aa(b,this.cell)||(this.cell&&this.cellOut(),b&&this.cellOver(b)),this.dragScroll(a))},cellOver:function(a){this.cell=a,this.date=a.date,this.trigger("cellOver",a,a.date)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null,this.date=null)},mouseup:function(a){this.stopDrag(a),this.stopListening(a)},stopDrag:function(a){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",a),this.isDragging=!1)},stopListening:function(b){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),a(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",b),this.origCell=this.cell=null,this.origDate=this.date=null)},getCell:function(a){return this.coordMap.getCell(a.pageX,a.pageY)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var a,b=this.scrollEl;b&&(a=b.offset(),this.scrollBounds={top:a.top,left:a.left,bottom:a.top+b.outerHeight(),right:a.left+b.outerWidth()})},dragScroll:function(a){var b,c,d,e,f=this.scrollSensitivity,g=this.scrollBounds,h=0,i=0;g&&(b=(f-(a.pageY-g.top))/f,c=(f-(g.bottom-a.pageY))/f,d=(f-(a.pageX-g.left))/f,e=(f-(g.right-a.pageX))/f,b>=0&&b<=1?h=b*this.scrollSpeed*-1:c>=0&&c<=1&&(h=c*this.scrollSpeed),d>=0&&d<=1?i=d*this.scrollSpeed*-1:e>=0&&e<=1&&(i=e*this.scrollSpeed)),this.setScrollVel(h,i)},setScrollVel:function(b,c){this.scrollTopVel=b,this.scrollLeftVel=c,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(a.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;this.scrollTopVel<0?a.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?a.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1e3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b),this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}},ba.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,start:function(b){this.isFollowing||(this.isFollowing=!0,this.mouseY0=b.pageY,this.mouseX0=b.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),a(document).on("mousemove",this.mousemoveProxy=a.proxy(this,"mousemove")))},stop:function(b,c){function d(){this.isAnimating=!1,e.destroyEl(),this.top0=this.left0=null,c&&c()}var e=this,f=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,a(document).off("mousemove",this.mousemoveProxy),b&&f&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:f,complete:d})):d())},getEl:function(){var a=this.el;return a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),a},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl(),null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0,this.leftDelta=a.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}},ca.prototype={view:null,cellHtml:"<td/>",rowHtml:function(a,b){var c,d,e=this.view,f=this.getHtmlRenderer("cell",a),g="";for(b=b||0,c=0;c<e.colCnt;c++)d=e.cellToDate(b,c),g+=f(b,c,d);return g=this.bookendCells(g,a,b),"<tr>"+g+"</tr>"},bookendCells:function(a,b,c){var d=this.view,e=this.getHtmlRenderer("intro",b)(c||0),f=this.getHtmlRenderer("outro",b)(c||0),g=d.opt("isRTL"),h=g?f:e,i=g?e:f;return"string"==typeof a?h+a+i:a.prepend(h).append(i)},getHtmlRenderer:function(a,b){var c,d,e,f,g=this.view;return c=a+"Html",b&&(d=b+I(a)+"Html"),d&&(f=g[d])?e=g:d&&(f=this[d])?e=this:(f=g[c])?e=g:(f=this[c])&&(e=this),"function"==typeof f?function(){return f.apply(e,arguments)||""}:function(){return f||""}}},da.prototype=D(ca.prototype),a.extend(da.prototype,{el:null,coordMap:null,cellDuration:null,elsByFill:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(a,b){},getCellDate:function(a){},getCellDayEl:function(a){},rangeToSegs:function(a,b){},bindHandlers:function(){var b=this;this.el.on("mousedown",function(c){a(c.target).is(".fc-event-container *, .fc-more")||a(c.target).closest(".fc-popover").length||b.dayMousedown(c)}),this.bindSegHandlers()},dayMousedown:function(b){var c,d,e,f,g=this,h=this.view,i=h.calendar,j=h.opt("selectable"),k=null,l=new _(this.coordMap,{scroll:h.opt("dragScroll"),dragStart:function(){h.unselect()},cellOver:function(a,b){l.origDate&&(e=g.getCellDayEl(a),k=[b,l.origDate].sort(J),c=k[0],d=k[1].clone().add(g.cellDuration),"resourceDay"===h.name&&(f={event:{editable:!1,resources:[h.resources()[a.col].id]}}),j&&(i.isSelectionAllowedInRange(c,d)?g.renderSelection(c,d,f):(k=null,o())))},cellOut:function(a,b){k=null,g.destroySelection(),p()},listenStop:function(b){if(k&&(k[0].isSame(k[1])&&h.trigger("dayClick",e[0],c,b),j)){var f;"resourceDay"===h.name&&(f=a.map(e,function(b){return h.resources()[a(b).index()-1].id})),h.reportSelection(c,d,b,f)}p()}});l.mousedown(b)},renderDrag:function(a,b,c){},destroyDrag:function(){},renderResize:function(a,b,c){},destroyResize:function(){},renderRangeHelper:function(a,b,c){var d,e=this.view;!b&&e.opt("forceEventDuration")&&(b=e.calendar.getDefaultEventEnd(!a.hasTime(),a)),d=c?D(c.event):{},d.start=a,d.end=b,d.allDay=!(a.hasTime()||b&&b.hasTime()),d.className=(d.className||[]).concat("fc-helper"),c||(d.editable=!1),this.renderHelper(d,c)},renderHelper:function(a,b){},destroyHelper:function(){},renderSelection:function(a,b,c){this.renderHighlight(a,b,c)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(b,c,d){var e=this.rangeToSegs(b,c),f=this.view;"resourceDay"===f.name&&(e=a.grep(e,function(a){return f.hasResource(d.event,f.resources()[a.leftCol])})),this.renderFill("highlight",e)},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(a,b){},destroyFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(b,c){var d,e=this,f=this[b+"SegEl"],g="",h=[];if(c.length){for(d=0;d<c.length;d++)g+=this.fillSegHtml(b,c[d]);a(g).each(function(b,d){var g=c[b],i=a(d);f&&(i=f.call(e,g,i)),i&&(i=a(i),i.is(e.fillSegTag)&&(g.el=i,h.push(g)))})}return h},fillSegTag:"div",fillSegHtml:function(a,b){var c=this[a+"SegClasses"],d=this[a+"SegStyles"],e=c?c.call(this,b):[],f=d?d.call(this,b):"";return"<"+this.fillSegTag+(e.length?' class="'+e.join(" ")+'"':"")+(f?' style="'+f+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(a,c,d){var e=this.view,f=e.calendar,g=e.opt("columnFormat");return'<th class="fc-day-header '+e.widgetHeaderClass+" fc-"+Qa[d.day()]+(b().isSame(d,"day")?" active":"")+'">'+G(f.formatDate(d,g))+"</th>"},bgCellHtml:function(a,b,c){var d=this.view,e=this.getDayClasses(c);return e.unshift("fc-day",d.widgetContentClass),'<td class="'+e.join(" ")+'" data-date="'+c.format()+'"></td>'},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow().stripTime(),d=["fc-"+Qa[a.day()]];"month"===b.name&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month"),a.isSame(c,"day")?d.push("fc-today",b.highlightStateClass):a<c?d.push("fc-past"):d.push("fc-future");for(var e=this.view.calendar.option("annotations").day,f=0;f<e.length;f++){var g=e[f];g.cls&&g.start.isSame(a,"day")&&d.push(g.cls)}return d}}),a.extend(da.prototype,{mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,segs:null,renderEvents:function(a){var b,c,d=this.eventsToSegs(a),e=[],f=[];for(b=0;b<d.length;b++)c=d[b],ea(c.event)?e.push(c):f.push(c);e=this.renderBgSegs(e)||e,f=this.renderFgSegs(f)||f,this.segs=e.concat(f)},destroyEvents:function(){this.triggerSegMouseout(),this.destroyFgSegs(),this.destroyBgSegs(),this.segs=null},getSegs:function(){return this.segs||[]},renderFgSegs:function(a){},destroyFgSegs:function(){},renderFgSegEls:function(b,c){var d,e=this.view,f="",g=[];if(b.length){for(d=0;d<b.length;d++)f+=this.fgSegHtml(b[d],c);a(f).each(function(c,d){var f=b[c],h=e.resolveEventEl(f.event,a(d));h&&(h.data("fc-seg",f),f.el=h,g.push(f))})}return g},fgSegHtml:function(a,b){},renderBgSegs:function(a){return this.renderFill("bgEvent",a)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){var b=a.event,c=b.source||{};return["fc-bgevent"].concat(b.className,c.className||[])},bgEventSegStyles:function(a){var b=this.view,c=a.event,d=c.source||{},e=c.color,f=d.color,g=b.opt("eventColor"),h=c.backgroundColor||e||d.backgroundColor||f||b.opt("eventBackgroundColor")||g;return h?"background-color:"+h:""},businessHoursSegClasses:function(a){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var b=this,c=this.view;a.each({mouseenter:function(a,c){b.triggerSegMouseover(a,c)},mouseleave:function(a,c){b.triggerSegMouseout(a,c)},click:function(a,b){return c.trigger("eventClick",this,a.event,b)},mousedown:function(d,e){a(e.target).is(".fc-resizer")&&c.isEventResizable(d.event)?b.segResizeMousedown(d,e):c.isEventDraggable(d.event)&&b.segDragMousedown(d,e)}},function(c,d){b.el.on(c,".fc-event-container > *",function(c){var e=a(this).data("fc-seg");if(e&&!b.isDraggingSeg&&!b.isResizingSeg)return d.call(this,e,c)})})},triggerSegMouseover:function(a,b){this.mousedOverSeg||(this.mousedOverSeg=a,this.view.trigger("eventMouseover",a.el[0],a.event,b))},triggerSegMouseout:function(a,b){b=b||{},this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",a.el[0],a.event,b))},segDragMousedown:function(b,c){var d,e,f,g=this,h=this.view,i=h.calendar,j=b.el,k=b.event,l=new ba(b.el,{parentEl:h.el,opacity:h.opt("dragOpacity"),revertDuration:h.opt("dragRevertDuration"),zIndex:2}),m=new _(h.coordMap,{distance:5,scroll:h.opt("dragScroll"),listenStart:function(a){l.hide(),l.start(a)},dragStart:function(a){g.triggerSegMouseout(b,a),g.isDraggingSeg=!0,h.hideEvent(k),f=k.resources&&k.resources.slice(),h.trigger("eventDragStart",j[0],k,a,{})},cellOver:function(a,c){var f=b.cellDate||m.origDate,j=g.computeDraggedEventDates(b,f,c);d=j.start,e=j.end,"resourceDay"===h.name&&(k.resources=[h.resources()[a.col].id]),i.isEventAllowedInRange(k,d,j.visibleEnd)?h.renderDrag(d,e,b)?l.hide():l.show():(d=null,l.show(),o())},cellOut:function(){d=null,h.destroyDrag(),l.show(),p()},dragStop:function(b){var c=d&&!d.isSame(k.start);if("resourceDay"===h.name){var e=0===a(f).not(k.resources).length&&0===a(k.resources).not(f).length;c=c||!e}l.stop(!c,function(){g.isDraggingSeg=!1,h.destroyDrag(),h.showEvent(k),h.trigger("eventDragStop",j[0],k,b,{}),c&&h.eventDrop(j[0],k,d,b)}),p()},listenStop:function(){l.stop()}});m.mousedown(c)},computeDraggedEventDates:function(a,b,c){var d,e,f,g,h,i=this.view,j=a.event,k=j.start,l=i.calendar.getEventEnd(j);return c.hasTime()===b.hasTime()?(d=A(c,b),e=k.clone().add(d),f=null===j.end?null:l.clone().add(d),g=j.allDay):(e=c,f=null,g=!c.hasTime()),h=f||i.calendar.getDefaultEventEnd(g,e),{start:e,end:f,visibleEnd:h}},segResizeMousedown:function(a,b){function c(){e.destroyResize(),f.showEvent(i)}var d,e=this,f=this.view,g=f.calendar,h=a.el,i=a.event,j=i.start,k=f.calendar.getEventEnd(i),l=null;d=new _(this.coordMap,{distance:5,scroll:f.opt("dragScroll"),dragStart:function(b){e.triggerSegMouseout(a,b),e.isResizingSeg=!0,f.trigger("eventResizeStart",h[0],i,b,{})},cellOver:function(b,d){d.isBefore(j)&&(d=j),l=d.clone().add(e.cellDuration),g.isEventAllowedInRange(i,j,l)?l.isSame(k)?(l=null,c()):(e.renderResize(j,l,a),f.hideEvent(i)):(l=null,c(),o())},cellOut:function(){l=null,c(),p()},dragStop:function(a){e.isResizingSeg=!1,c(),p(),f.trigger("eventResizeStop",h[0],i,a,{}),l&&f.eventResize(h[0],i,l,a)}}),d.mousedown(b)},getSegClasses:function(a,b,c){var d=a.event,e=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(d.className,d.source?d.source.className:[]);return b&&e.push("fc-draggable"),c&&e.push("fc-resizable"),e},getEventSkinCss:function(a){var b=this.view,c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor"),g=a.backgroundColor||d||c.backgroundColor||e||b.opt("eventBackgroundColor")||f,h=a.borderColor||d||c.borderColor||e||b.opt("eventBorderColor")||f,i=a.textColor||c.textColor||b.opt("eventTextColor"),j=[];return g&&j.push("background-color:"+g),h&&j.push("border-color:"+this.colorLuminance(h,-.2)),i&&j.push("color:"+i),j.join(";")},colorLuminance:function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;d<3;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e},eventsToSegs:function(a,b){var c,d=this.eventsToRanges(a),e=[];for(c=0;c<d.length;c++)e.push.apply(e,this.eventRangeToSegs(d[c],b));return e},eventsToRanges:function(b){var c=this,d=ha(b),e=[];return a.each(d,function(a,b){b.length&&e.push.apply(e,fa(b[0])?c.eventsToInverseRanges(b):c.eventsToNormalRanges(b))}),e},eventsToNormalRanges:function(a){var b,c,d,e,f=this.view.calendar,g=[];for(b=0;b<a.length;b++)c=a[b],d=c.start.clone().stripZone(),e=f.getEventEnd(c).stripZone(),g.push({event:c,start:d,end:e,eventStartMS:+d,eventDurationMS:e-d});return g},eventsToInverseRanges:function(a){var b,c,d=this.view,e=d.start.clone().stripZone(),f=d.end.clone().stripZone(),g=this.eventsToNormalRanges(a),h=[],i=a[0],j=e;for(g.sort(ia),b=0;b<g.length;b++)c=g[b],c.start>j&&h.push({event:i,start:j,end:c.start}),j=c.end;return j<f&&h.push({event:i,start:j,end:f}),h},eventRangeToSegs:function(b,c){var d,e,f,g=this.view;if(d=c?c(b.start,b.end):this.rangeToSegs(b.start,b.end),"resourceDay"===g.name){var h=g.resources();d=a.grep(d,function(a,c){return h[c]&&g.hasResource(b.event,h[c])})}for(e=0;e<d.length;e++)f=d[e],f.event=b.event,f.eventStartMS=b.eventStartMS,f.eventDurationMS=b.eventDurationMS;return d}}),a.extend(da.prototype,{annotationsToSegs:function(b,c,d){var e=this;return a.map(b,function(a){return e.annotationToSegs(a,c,d)})},annotationToSegs:function(a,b,c){var d,e,f,g=a.start.clone().stripZone(),h=this.view.calendar.getEventEnd(a).stripZone();for(b&&c?(f=y(g,h,b,c),d=f?[f]:[]):d=this.rangeToSegs(g,h),e=0;e<d.length;e++)f=d[e],f.annotation=a,f.eventStartMS=+g,f.eventDurationMS=h-g;return d},renderAnnotations:function(b,c){var d,e="",f=[];for(d=0;d<b.length;d++)e+=this.renderAnnotationHtml(b[d],c);return a(e).each(function(c,d){b[c].el=a(d),f.push(b[c])}),f},renderAnnotationHtml:function(a,b){var c,d=this.view,e=d.opt("isRTL"),f=a.annotation,g=["fc-annotation"].concat(f.cls),h=this.getEventSkinCss(f),i="";return!f.allDay&&a.isStart&&(i='<span class="fc-time">'+G(d.getEventTimeText(f))+"</span>"),c='<span class="fc-title">'+(G(f.title||"")||"&nbsp;")+"</span>",'<a class="'+g.join(" ")+'"'+(f.url?' href="'+G(f.url)+'"':"")+(h?' style="'+h+'"':"")+'><div class="fc-content">'+(e?c+" "+i:i+" "+c)+"</div></a>"}}),ka.prototype=D(da.prototype),a.extend(ka.prototype,{numbersVisible:!1,cellDuration:b.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,render:function(b){var c,d=this.view,e="";for(c=0;c<d.rowCnt;c++)e+=this.dayRowHtml(c,b);this.el.html(e),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),this.dayEls.each(function(b,c){var e=d.cellToDate(Math.floor(b/d.colCnt),b%d.colCnt);d.trigger("dayRender",null,e,a(c))}),da.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(a,b){var c=this.view,d=["fc-row","fc-week",c.widgetContentClass];return b&&d.push("fc-rigid"),'<div class="'+d.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",a)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a,b,c){return this.bgCellHtml(a,b,c)},buildCoords:function(b,c){var d,e,f,g=this.view.colCnt;this.dayEls.slice(0,g).each(function(b,g){d=a(g),e=d.offset().left,b&&(f[1]=e),f=[e],c[b]=f}),f[1]=e+d.outerWidth(),this.rowEls.each(function(c,g){d=a(g),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f}),f[1]=e+d.outerHeight()+this.bottomCoordPadding},getCellDate:function(a){return this.view.cellToDate(a)},getCellDayEl:function(a){return this.dayEls.eq(a.row*this.view.colCnt+a.col)},rangeToSegs:function(a,b){return this.view.rangeToSegments(a,b)},renderDrag:function(a,b,c){var d;if(this.renderHighlight(a,b||this.view.calendar.getDefaultEventEnd(!0,a),c),c&&!c.el.closest(this.el).length)return this.renderRangeHelper(a,b,c),d=this.view.opt("dragOpacity"),void 0!==d&&this.helperEls.css("opacity",d),!0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderResize:function(a,b,c){this.renderHighlight(a,b,c),this.renderRangeHelper(a,b,c)},destroyResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(b,c){var d,e=[],f=this.eventsToSegs([b]);f=this.renderFgSegEls(f),d=this.renderSegRows(f),this.rowEls.each(function(b,f){var g,h=a(f),i=a('<div class="fc-helper-skeleton"><table/></div>');g=c&&c.row===b?c.el.position().top:h.find(".fc-content-skeleton tbody").position().top,i.css("top",g).find("table").append(d[b].tbodyEl),h.append(i),e.push(i[0])}),this.helperEls=a(e)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(b,c){var d,e,f,g=[];for(c=this.renderFillSegEls(b,c),d=0;d<c.length;d++)e=c[d],f=this.renderFillRow(b,e),this.rowEls.eq(e.row).append(f),g.push(f[0]);return this.elsByFill[b]=a(g),c},renderFillRow:function(b,c){var d,e,f=this.view.colCnt,g=c.leftCol,h=c.rightCol+1;return d=a('<div class="fc-'+b.toLowerCase()+'-skeleton"><table><tr/></table></div>'),e=d.find("tr"),g>0&&e.append('<td colspan="'+g+'"/>'),e.append(c.el.attr("colspan",h-g)),h<f&&e.append('<td colspan="'+(f-h)+'"/>'),this.bookendCells(e,b),d}}),a.extend(ka.prototype,{rowStructs:null,destroyEvents:function(){this.destroySegPopover(),da.prototype.destroyEvents.apply(this,arguments)},getSegs:function(){return da.prototype.getSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(b){var c=a.grep(b,function(a){return a.event.allDay});return da.prototype.renderBgSegs.call(this,c)},renderFgSegs:function(b){var c;return b=this.renderFgSegEls(b),c=this.rowStructs=this.renderSegRows(b),this.rowEls.each(function(b,d){a(d).find(".fc-content-skeleton > table").append(c[b].tbodyEl)}),b},destroyFgSegs:function(){for(var a,b=this.rowStructs||[];a=b.pop();)a.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(a){var b,c,d=[],e=[];for("resourceDay"!==this.view.name&&(e=this.annotationsToSegs(this.view.calendar.option("annotations").day)),e=this.renderAnnotations(e),b=this.groupSegRows(a.concat(e)),c=0;c<b.length;c++)d.push(this.renderSegRow(c,b[c]));return d},fgSegHtml:function(a,b){var c,d=this.view,e=d.opt("isRTL"),f=a.event,g=d.isEventDraggable(f),h=!b&&f.allDay&&a.isEnd&&d.isEventResizable(f),i=this.getSegClasses(a,g,h),j=this.getEventSkinCss(f),k="";return i.unshift("fc-day-grid-event"),!f.allDay&&a.isStart&&(k='<span class="fc-time">'+G(d.getEventTimeText(f))+"</span>"),c='<span class="fc-title">'+(G(f.title||"")||"&nbsp;")+"</span>",'<a class="'+i.join(" ")+'"'+(f.url?' href="'+G(f.url)+'"':"")+(j?' style="'+j+'"':"")+'><div class="fc-content">'+(e?c+" "+k:k+" "+c)+"</div>"+(h?'<div class="fc-resizer"/>':"")+"</a>"},renderSegRow:function(b,c){function d(b){for(;g<b;)k=(s[e-1]||[])[g],k?k.attr("rowspan",parseInt(k.attr("rowspan")||1,10)+1):(k=a("<td/>"),h.append(k)),r[e][g]=k,s[e][g]=k,g++}var e,f,g,h,i,j,k,l=this.view,m=l.colCnt,n=this.buildSegLevels(c),o=Math.max(1,n.length),p=a("<tbody/>"),q=[],r=[],s=[];for(e=0;e<o;e++){if(f=n[e],g=0,h=a("<tr/>"),q.push([]),r.push([]),s.push([]),f)for(i=0;i<f.length;i++){for(j=f[i],d(j.leftCol),k=a('<td class="fc-event-container"/>').append(j.el),j.leftCol!=j.rightCol?k.attr("colspan",j.rightCol-j.leftCol+1):s[e][g]=k;g<=j.rightCol;)r[e][g]=k,q[e][g]=j,g++;h.append(k)}d(m),this.bookendCells(h,"eventSkeleton"),p.append(h)}return{row:b,tbodyEl:p,cellMatrix:r,segMatrix:q,segLevels:n,segs:c}},buildSegLevels:function(a){var b,c,d,e=[];for(a.sort(ja),b=0;b<a.length;b++){for(c=a[b],d=0;d<e.length&&la(c,e[d]);d++);c.level=d,(e[d]||(e[d]=[])).push(c)}for(d=0;d<e.length;d++)e[d].sort(ma);return e},groupSegRows:function(a){var b,c=this.view,d=[];for(b=0;b<c.rowCnt;b++)d.push([]);for(b=0;b<a.length;b++)d[a[b].row].push(a[b]);return d}}),a.extend(ka.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var b,c,d=this.rowStructs||[];for(b=0;b<d.length;b++)this.unlimitRow(b),c=!!a&&("number"==typeof a?a:this.computeRowLevelLimit(b)),c!==!1&&this.limitRow(b,c)},computeRowLevelLimit:function(a){var b,c,d=this.rowEls.eq(a),e=d.height(),f=this.rowStructs[a].tbodyEl.children();for(b=0;b<f.length;b++)if(c=f.eq(b).removeClass("fc-limited"),c.position().top+c.outerHeight()>e)return b;return!1},limitRow:function(b,c){function d(d){for(;y<d;)e={row:b,col:y},k=u.getCellSegs(e,c),k.length&&(n=g[c-1][y],t=u.renderMoreLink(e,k),s=a("<div/>").append(t),n.append(s),x.push(s[0])),y++}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this,v=this.view,w=this.rowStructs[b],x=[],y=0;if(c&&c<w.segLevels.length){for(f=w.segLevels[c-1],g=w.cellMatrix,h=w.tbodyEl.children().slice(c).addClass("fc-limited").get(),i=0;i<f.length;i++){for(j=f[i],d(j.leftCol),m=[],l=0;y<=j.rightCol;)e={row:b,col:y},k=this.getCellSegs(e,c),m.push(k),l+=k.length,y++;if(l){for(n=g[c-1][j.leftCol],o=n.attr("rowspan")||1,p=[],q=0;q<m.length;q++)r=a('<td class="fc-more-cell"/>').attr("rowspan",o),k=m[q],e={row:b,col:j.leftCol+q},t=this.renderMoreLink(e,[j].concat(k)),s=a("<div/>").append(t),r.append(s),p.push(r[0]),x.push(r[0]);n.addClass("fc-limited").after(a(p)),h.push(n[0])}}d(v.colCnt),w.moreEls=a(x),w.limitedEls=a(h)}},unlimitRow:function(a){var b=this.rowStructs[a];b.moreEls&&(b.moreEls.remove(),b.moreEls=null),b.limitedEls&&(b.limitedEls.removeClass("fc-limited"),b.limitedEls=null)},renderMoreLink:function(b,c){var d=this,e=this.view;return a('<a class="fc-more"/>').text(this.getMoreLinkText(c.length)).on("click",function(f){var g=e.opt("eventLimitClick"),h=e.cellToDate(b),i=a(this),j=d.getCellDayEl(b),k=d.getCellSegs(b),l=d.resliceDaySegs(k,h),m=d.resliceDaySegs(c,h);"function"==typeof g&&(g=e.trigger("eventLimitClick",null,{date:h,dayEl:j,moreEl:i,segs:l,hiddenSegs:m},f)),"popover"===g?d.showSegPopover(h,b,i,l):"string"==typeof g&&e.calendar.zoomTo(h,g)})},showSegPopover:function(a,b,c,d){var e,f,g=this,h=this.view,i=c.parent();e=1==h.rowCnt?this.view.el:this.rowEls.eq(b.row),f={className:"fc-more-popover",content:this.renderSegPopoverContent(a,d),parentEl:this.el,top:e.offset().top,autoHide:!0,viewportConstrain:h.opt("popoverViewportConstrain"),hide:function(){g.segPopover.destroy(),g.segPopover=null,g.popoverSegs=null}},h.opt("isRTL")?f.right=i.offset().left+i.outerWidth()+1:f.left=i.offset().left-1,this.segPopover=new Y(f),this.segPopover.show()},renderSegPopoverContent:function(b,c){var d,e=this.view,f=e.opt("theme"),g=b.format(e.opt("dayPopoverFormat")),h=a('<div class="fc-header '+e.widgetHeaderClass+'"><span class="fc-close '+(f?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+G(g)+'</span><div class="fc-clear"/></div><div class="fc-body '+e.widgetContentClass+'"><div class="fc-event-container"></div></div>'),i=h.find(".fc-event-container");for(c=this.renderFgSegEls(c,!0),this.popoverSegs=c,d=0;d<c.length;d++)c[d].cellDate=b,i.append(c[d].el);return h},resliceDaySegs:function(b,c){var d=a.map(b,function(a){return a.event}),e=c.clone().stripTime(),f=e.clone().add(1,"days");return this.eventsToSegs(d,function(a,b){var c=y(a,b,e,f);return c?[c]:[]})},getMoreLinkText:function(a){var b=this.view,c=b.opt("eventLimitText");return"function"==typeof c?c(a):"+"+a+" "+c},getCellSegs:function(a,b){for(var c,d=this.rowStructs[a.row].segMatrix,e=b||0,f=[];e<d.length;)c=d[e][a.col],
c&&f.push(c),e++;return f}}),na.prototype=D(da.prototype),a.extend(na.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,render:function(){this.processOptions(),this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.computeSlatTops(),this.renderBusinessHours(),da.prototype.render.call(this)},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(a),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a,b,c){return this.bgCellHtml(a,b,c)},slatRowHtml:function(){for(var a,c,d,e,f=this.view,g=f.calendar,h=f.opt("isRTL"),i="",j=this.slotDuration.asMinutes()%15===0,k=b.duration(+this.minTime);k<this.maxTime;){a=f.start.clone().time(k),c=a.minutes(),d='<td class="fc-axis fc-time '+f.widgetContentClass+'" '+f.axisStyleAttr()+">"+(j&&0!==c?"":"<span>"+g.formatDate(a,f.opt("axisFormat"))+"</span>")+"</td>",e="<div class='table'>",e+="<div class='table-row'>";for(var l=0;l<f.colCnt;l++)e+="<div class='table-cell'>"+(c?"&nsbp":g.formatDate(a,f.opt("axisFormat")))+"</div>";e+="\t</div>",e+="</div>",i+="<tr "+(c?'class="fc-minor"':"")+">"+(h?"":d)+'<td class="'+f.widgetContentClass+'">'+e+"</td>"+(h?d:"")+"</tr>",k.add(this.slotDuration)}return i},processOptions:function(){var a=this.view,c=a.opt("slotDuration"),d=a.opt("snapDuration");c=b.duration(c),d=d?b.duration(d):c,this.slotDuration=c,this.snapDuration=d,this.cellDuration=d,this.minTime=b.duration(a.opt("minTime")),this.maxTime=b.duration(a.opt("maxTime"))},rangeToSegs:function(a,b){var c,d,e,f,g,h=this.view,i=[];for(a=a.clone().stripZone(),b=b.clone().stripZone(),d=0;d<h.colCnt;d++)e=h.cellToDate(0,d),f=e.clone().time(this.minTime),g=e.clone().time(this.maxTime),c=y(a,b,f,g),c&&(c.col=d,i.push(c));return i},resize:function(){this.computeSlatTops(),this.updateSegVerticals()},buildCoords:function(c,d){var e,f,g=this.view.colCnt,h=this.el.offset().top,i=b.duration(+this.minTime),j=null;for(this.dayEls.slice(0,g).each(function(b,c){e=a(c),f=e.offset().left,j&&(j[1]=f),j=[f],d[b]=j}),j[1]=f+e.outerWidth(),j=null;i<this.maxTime;)f=h+this.computeTimeTop(i),j&&(j[1]=f),j=[f],c.push(j),i.add(this.snapDuration);j[1]=h+this.computeTimeTop(i)},getCellDate:function(a){var b=this.view,c=b.calendar;return c.rezoneDate(b.cellToDate(0,a.col).time(this.minTime+this.snapDuration*a.row))},getCellDayEl:function(a){return this.dayEls.eq(a.col)},computeDateTop:function(a,c){return this.computeTimeTop(b.duration(a.clone().stripZone()-c.clone().stripTime()))},computeTimeTop:function(a){var b,c,d,e,f=(a-this.minTime)/this.slotDuration;return f=Math.max(0,f),f=Math.min(this.slatEls.length,f),b=Math.floor(f),c=f-b,d=this.slatTops[b],c?(e=this.slatTops[b+1],d+(e-d)*c):d},computeSlatTops:function(){var b,c=[];this.slatEls.each(function(d,e){b=a(e).position().top,c.push(b)}),c.push(b+this.slatEls.last().outerHeight()),this.slatTops=c},renderDrag:function(a,b,c){var d;return c?(this.renderRangeHelper(a,b,c),d=this.view.opt("dragOpacity"),void 0!==d&&this.helperEl.css("opacity",d),!0):void this.renderHighlight(a,b||this.view.calendar.getDefaultEventEnd(!1,a),c)},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderResize:function(a,b,c){this.renderRangeHelper(a,b,c)},destroyResize:function(){this.destroyHelper()},renderHelper:function(b,c){var d,e,f,g,h=this.eventsToSegs([b]);for(h=this.renderFgSegEls(h),d=this.renderSegTable(h),e=0;e<h.length;e++)f=h[e],c&&c.col===f.col&&(g=c.el,f.el.css({left:g.css("left"),right:g.css("right"),"margin-left":g.css("margin-left"),"margin-right":g.css("margin-right")}));this.helperEl=a('<div class="fc-helper-skeleton"/>').append(d).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(a,b,c){this.view.opt("selectHelper")?this.renderRangeHelper(a,b,c):this.renderHighlight(a,b,c)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderFill:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=this.view;if(c.length){for(c=this.renderFillSegEls(b,c),e=this.groupSegCols(c),d=d||b.toLowerCase(),f=a('<div class="fc-'+d+'-skeleton"><table><tr/></table></div>'),g=f.find("tr"),h=0;h<e.length;h++)if(i=e[h],j=a("<td/>").appendTo(g),i.length)for(k=a('<div class="fc-'+d+'-container"/>').appendTo(j),l=o.cellToDate(0,h),m=0;m<i.length;m++)n=i[m],k.append(n.el.css({top:this.computeDateTop(n.start,l),bottom:-this.computeDateTop(n.end,l)}));this.bookendCells(g,b),this.el.append(f),this.elsByFill[b]=f}return c}}),a.extend(na.prototype,{eventSkeletonEl:null,renderFgSegs:function(b){return b=this.renderFgSegEls(b),this.el.append(this.eventSkeletonEl=a('<div class="fc-content-skeleton"/>').append(this.renderSegTable(b))),b},destroyFgSegs:function(a){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(b){var c,d,e,f,g,h,i=a("<table><tr/></table>"),j=i.find("tr"),k=this.annotationsToSegs(this.view.calendar.option("annotations").timed);for(k=this.renderAnnotations(k),b=b.concat(k),c=this.groupSegCols(b),this.computeSegVerticals(b),f=0;f<c.length;f++){for(g=c[f],oa(g),h=a('<div class="fc-event-container"/>'),d=0;d<g.length;d++)e=g[d],e.el.css(this.generateSegPositionCss(e)),e.bottom-e.top<30&&e.el.addClass("fc-short"),h.append(e.el);j.append(a("<td/>").append(h))}return this.bookendCells(j,"eventSkeleton"),i},updateSegVerticals:function(){var a,b=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(b),a=0;a<b.length;a++)b[a].el.css(this.generateSegVerticalCss(b[a]))},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},fgSegHtml:function(a,b){var c,d,e,f=this.view,g=a.event,h=f.isEventDraggable(g),i=!b&&a.isEnd&&f.isEventResizable(g),j=this.getSegClasses(a,h,i),k=this.getEventSkinCss(g);return j.unshift("fc-time-grid-event"),f.isMultiDayEvent(g)?(a.isStart||a.isEnd)&&(c=f.getEventTimeText(a.start,a.end),d=f.getEventTimeText(a.start,a.end,"LT"),e=f.getEventTimeText(a.start,null)):(c=f.getEventTimeText(g),d=f.getEventTimeText(g,"LT"),e=f.getEventTimeText(g.start,null)),'<a class="'+j.join(" ")+'"'+(g.url?' href="'+G(g.url)+'"':"")+(k?' style="'+k+'"':"")+'><div class="fc-custom-content" style="width:inherit; height:100%"><div class="fc-content">'+(c?'<div class="fc-time" data-start="'+G(e)+'" data-full="'+G(d)+'"><span>'+G(c)+"</span></div>":"")+(g.title?'<div class="fc-title">'+G(g.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(i?'<div class="fc-resizer"/>':"")+"</div></a>"},generateSegPositionCss:function(a){var b,c,d=this.view,e=d.opt("isRTL"),f=d.opt("slotEventOverlap"),g=a.backwardCoord,h=a.forwardCoord,i=this.generateSegVerticalCss(a);return f&&(h=Math.min(1,g+2*(h-g))),e?(b=1-h,c=g):(b=g,c=1-h),i.zIndex=a.level+1,i.left=100*b+"%",i.right=100*c+"%",f&&a.forwardPressure&&(i[e?"marginLeft":"marginRight"]=20),i},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(a){var b,c=this.view,d=[];for(b=0;b<c.colCnt;b++)d.push([]);for(b=0;b<a.length;b++)d[a[b].col].push(a[b]);return d}}),wa.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var b=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=b+"-widget-header",this.widgetContentClass=b+"-widget-content",this.highlightStateClass=b+"-state-highlight",this.documentMousedownProxy=a.proxy(this,"documentMousedown"),this.documentDragStartProxy=a.proxy(this,"documentDragStart")},render:function(){this.updateSize(),this.trigger("viewRender",this,this,this.el),a(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect(),this.trigger("viewDestroy",this,this,this.el),this.destroyEvents(),this.el.empty(),a(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(a,b){},updateSize:function(a){a&&this.recordScroll(),this.updateHeight(),this.updateWidth()},updateWidth:function(){},updateHeight:function(){var a=this.calendar,b=this;setTimeout(function(){b.setHeight(a.getSuggestedViewHeight(),a.isHeightAuto())})},setHeight:function(a,b){},computeScrollerHeight:function(a){var b,c=this.el.add(this.scrollerEl);return c.css({position:"relative",left:-1}),b=this.el.outerHeight()-this.scrollerEl.height(),c.css({position:"",left:""}),a-b},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderEvents:function(a){this.segEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)}),this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)})},resolveEventEl:function(b,c){var d=this.trigger("eventRender",b,b,c);return d===!1?c=null:d&&d!==!0&&(c=a(d)),c},showEvent:function(a){this.segEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.segEach(function(a){a.el.css("visibility","hidden")},a)},segEach:function(a,b){var c,d=this.getSegs();for(c=0;c<d.length;c++){var e=d[c].event||d[c].annotation;b&&e._id!==b._id||a.call(this,d[c])}},getSegs:function(){},renderDrag:function(a,b,c){},destroyDrag:function(){},documentDragStart:function(b,c){var d,e,f,g,h,i=this,j=this.calendar,k=null,l=null,m=null;this.opt("droppable")&&(d=a(b.target),e=this.opt("dropAccept"),(a.isFunction(e)?e.call(d[0],d):d.is(e))&&(f=xa(d),g=f.eventProps,h=new _(this.coordMap,{cellOver:function(b,c){k=c,l=f.duration?k.clone().add(f.duration):null,m=l||j.getDefaultEventEnd(!k.hasTime(),k),g&&a.extend(g,{start:k,end:l}),j.isExternalDragAllowedInRange(k,m,g)?i.renderDrag(k,m):(k=null,o())},cellOut:function(){k=null,i.destroyDrag(),p()}}),a(document).one("dragstop",function(a,b){var c;i.destroyDrag(),p(),k&&(f.startTime&&!k.hasTime()&&k.time(f.startTime),i.trigger("drop",d[0],k,a,b),g&&(c=j.renderEvent(g,f.stick),i.trigger("eventReceive",null,c[0])))}),h.startDrag(b)))},select:function(a,b,c){this.unselect(c),this.renderSelection(a,b),this.reportSelection(a,b,c)},renderSelection:function(a,b){},reportSelection:function(a,b,c){this.isSelected=!0,this.trigger("select",null,a,b,c)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,a))},destroySelection:function(){},documentMousedown:function(b){var c;this.isSelected&&this.opt("unselectAuto")&&x(b)&&(c=this.opt("unselectCancel"),c&&a(b.target).closest(c).length||this.unselect(b))}},Ma.dataAttrPrefix="",ya.prototype=D(wa.prototype),a.extend(ya.prototype,{dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,render:function(a,b,c){this.rowCnt=a,this.colCnt=b,this.dayNumbersVisible=c,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(this.hasRigidRows()),wa.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy(),wa.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+G(this.opt("weekNumberTitle"))+"</span></th>"},numberIntroHtml:function(a){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.cellToDate(a,0))+"</span></td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"},numberCellHtml:function(a,b,c){var d;return this.dayNumbersVisible?(d=this.dayGrid.getDayClasses(c),d.unshift("fc-day-number"),'<td class="'+d.join(" ")+'" data-date="'+c.format()+'">'+c.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!=typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=s(this.el.find(".fc-week-number")))},setHeight:function(a,b){var c,d=this.opt("eventLimit");u(this.scrollerEl),n(this.headRowEl),this.dayGrid.destroySegPopover(),d&&"number"==typeof d&&this.dayGrid.limitRows(d),c=this.computeScrollerHeight(a),this.setGridHeight(c,b),d&&"number"!=typeof d&&this.dayGrid.limitRows(d),!b&&t(this.scrollerEl,c)&&(m(this.headRowEl,w(this.scrollerEl)),c=this.computeScrollerHeight(a),this.scrollerEl.height(c),this.restoreScroll())},setGridHeight:function(a,b){b?r(this.dayGrid.rowEls):q(this.dayGrid.rowEls,a,!0)},renderEvents:function(a){this.dayGrid.renderEvents(a),this.updateHeight(),wa.prototype.renderEvents.call(this,a)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){wa.prototype.destroyEvents.call(this),this.recordScroll(),this.dayGrid.destroyEvents()},renderDrag:function(a,b,c){return this.dayGrid.renderDrag(a,b,c)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(a,b){this.dayGrid.renderSelection(a,b)},destroySelection:function(){this.dayGrid.destroySelection()}}),e({fixedWeekCount:!0}),Na.month=za,za.prototype=D(ya.prototype),a.extend(za.prototype,{name:"month",incrementDate:function(a,b){return a.clone().stripTime().add(b,"months").startOf("month")},render:function(a){var b;this.intervalStart=a.clone().stripTime().startOf("month"),this.intervalEnd=this.intervalStart.clone().add(1,"months"),this.start=this.intervalStart.clone(),this.start=this.skipHiddenDays(this.start),this.start.startOf("week"),this.start=this.skipHiddenDays(this.start),this.end=this.intervalEnd.clone(),this.end=this.skipHiddenDays(this.end,-1,!0),this.end.add((7-this.end.weekday())%7,"days"),this.end=this.skipHiddenDays(this.end,-1,!0),b=Math.ceil(this.end.diff(this.start,"weeks",!0)),this.isFixedWeeks()&&(this.end.add(6-b,"weeks"),b=6),this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat")),ya.prototype.render.call(this,b,this.getCellsPerWeek(),!0)},setGridHeight:function(a,b){b=b||"variable"===this.opt("weekMode"),b&&(a*=this.rowCnt/6),q(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}}),Na.basicWeek=Aa,Aa.prototype=D(ya.prototype),a.extend(Aa.prototype,{name:"basicWeek",incrementDate:function(a,b){return a.clone().stripTime().add(b,"weeks").startOf("week")},render:function(a){this.intervalStart=a.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat"),"  "),ya.prototype.render.call(this,1,this.getCellsPerWeek(),!1)}}),Na.basicDay=Ba,Ba.prototype=D(ya.prototype),a.extend(Ba.prototype,{name:"basicDay",incrementDate:function(a,b){var c=a.clone().stripTime().add(b,"days");return c=this.skipHiddenDays(c,b<0?-1:1)},render:function(a){this.start=this.intervalStart=a.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),ya.prototype.render.call(this,1,1,!1)}}),e({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:60:00",axisFormat:Ca,timeFormat:{agenda:Da},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});var _a=5;Ea.prototype=D(wa.prototype),a.extend(Ea.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(b){this.rowCnt=1,this.colCnt=b,this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.el=this.el.find(".fc-time-grid"),this.timeGrid.render(),this.bottomRuleEl=a('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)"),wa.prototype.render.call(this),this.resetScroll()},destroy:function(){this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),wa.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var a,b,c,d;return this.opt("weekNumbers")?(a=this.cellToDate(0,0),b=this.calendar.calculateWeekNumber(a),c=this.opt("weekNumberTitle"),d=this.opt("isRTL")?b+c:c+b,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+G(d)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||G(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(a){a&&this.timeGrid.resize(),wa.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=s(this.el.find(".fc-axis"))},setHeight:function(a,b){var c,d;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),u(this.scrollerEl),n(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),c=this.opt("eventLimit"),c&&"number"!=typeof c&&(c=_a),c&&this.dayGrid.limitRows(c)),b||(d=this.computeScrollerHeight(a),t(this.scrollerEl,d)?(m(this.noScrollRowEls,w(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d),this.restoreScroll()):(this.scrollerEl.height(d).css("overflow","hidden"),this.bottomRuleEl.show()))},resetScroll:function(){function a(){c.scrollerEl.scrollTop(e)}var c=this,d=b.duration(this.opt("scrollTime")),e=this.timeGrid.computeTimeTop(d);e=Math.ceil(e),e&&e++,a(),setTimeout(a,0)},renderEvents:function(a){var b,c,d=[],e=[],f=[];for(c=0;c<a.length;c++)a[c].allDay?d.push(a[c]):e.push(a[c]);b=this.timeGrid.renderEvents(e),this.dayGrid&&(f=this.dayGrid.renderEvents(d)),this.updateHeight(),wa.prototype.renderEvents.call(this,a)},getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){wa.prototype.destroyEvents.call(this),this.recordScroll(),this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(a,b,c){return a.hasTime()?this.timeGrid.renderDrag(a,b,c):this.dayGrid?this.dayGrid.renderDrag(a,b,c):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(a,b){a.hasTime()||b.hasTime()?this.timeGrid.renderSelection(a,b):this.dayGrid&&this.dayGrid.renderSelection(a,b)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}}),Na.agendaWeek=Fa,Fa.prototype=D(Ea.prototype),a.extend(Fa.prototype,{name:"agendaWeek",incrementDate:function(a,b){return a.clone().stripTime().add(b,"weeks").startOf("week")},render:function(a){this.intervalStart=a.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat"),"  "),Ea.prototype.render.call(this,this.getCellsPerWeek())}}),Na.agendaDay=Ga,Ga.prototype=D(Ea.prototype),a.extend(Ga.prototype,{name:"agendaDay",incrementDate:function(a,b){var c=a.clone().stripTime().add(b,"days");return c=this.skipHiddenDays(c,b<0?-1:1)},render:function(a){this.start=this.intervalStart=a.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),Ea.prototype.render.call(this,1)}}),Ha.prototype=D(Ea.prototype),a.extend(Ha.prototype,{resources:function(){return this._resources=this._resources||this.calendar.fetchResources(),this._resources},hasResource:function(b,c){return this.opt("hasResource")?this.opt("hasResource").apply(this,arguments):b.resources&&a.grep(b.resources,function(a){return a==c.id}).length},reportSelection:function(a,b,c,d){this.isSelected=!0,this.calendar.trigger.apply(this.calendar,["select",this,a,b,c,this,d])},headCellHtml:function(a,b,c){var d=this.resources()[b],e=["fc-day-header",this.widgetHeaderClass,"fc-"+Qa[c.day()]];return d&&e.push(d.className),'<th class="'+e.join(" ")+'">'+(d?'<img src="'+d.image+'" width="20"/> <div>'+G(d.name)+"</div>":"")+"</th>"}}),Na.resourceDay=Ia,Ia.prototype=D(Ha.prototype),a.extend(Ia.prototype,{name:"resourceDay",incrementDate:function(a,b){return Ga.prototype.incrementDate.apply(this,arguments)},render:function(a){this.start=this.intervalStart=a.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),Ea.prototype.render.call(this,this.resources().length||1)}})});